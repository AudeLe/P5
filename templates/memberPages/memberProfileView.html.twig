{% extends "template.html.twig" %}

{% block title %}{{ session.login }}{% endblock %}

{% block content %}
<p>profil de membre</p>

    <!--<form action="../public/index.php?action=recoverGoogleBook" method="post">-->
    <label for="ISBN">Veuillez rentrer l'ISBN de l'ouvrage souhaité</label><br/>
    <p>Veuillez indiquer uniquement les chiffres</p>
    <input type="text" id="ISBN" name="ISBN"/>
    <input type="submit" id="ISBNSubmission" value="Soumettre l'ISBN"/>
    <!--</form>-->

    {% block bookInformations %}
        <div id="bookInformations">
            <form action="../public/index.php?action=registerBookDatas" method="post">
                <div>
                    <label for="bookTitle">Titre</label><br />
                    <input type="text" id="bookTitle" name="bookTitle" />
                </div>

                <div>
                    <label for="bookAuthors">Auteur(s)</label><br />
                    <input type="text" id="bookAuthors" name="bookAuthors"/>
                </div>

                <div>
                    <label for="bookPublishedDate">Date de publication</label><br />
                    <input type="text" id="bookPublishedDate" name="bookPublishedDate" />
                </div>

                <div>
                    <label for="bookDescription">Résumé</label><br />
                    <textarea id="bookDescription" name="bookDescription"></textarea>
                </div>

                <div>
                    <label for="bookISBN">ISBN</label><br />
                    <input type="text" id="bookISBN" name="bookISBN" />
                </div>

                <div>
                    <label for="bookNbPages">Nombre de pages</label><br />
                    <input type="text" id="bookNbPages" name="bookNbPages"/>
                </div>

                <input type="submit" value="Enregistrer le livre" />
            </form>
        </div>
    {% endblock %}

    {% block memberBookListArray %}
        <h5>Liste de livres</h5>
        <table>
            <tr>
                <th>Auteur</th>
                <th>Titre</th>
                <th>Résumé</th>
                <th>Année de publication</th>
                <th>ISBN</th>
                <th>Nombre de pages</th>
                <th>Supprimer de la liste</th>
            </tr>
            {% for book in memberBookList %}
                <tr>
                    <td>{{ book.author }}</td>
                    <td>{{ book.title }}</td>
                    <td>{{ book.summary }}</td>
                    <td>{{ book.publishingYear }}</td>
                    <td>{{ book.ISBN }}</td>
                    <td>{{ book.nbPages }}</td>
                    <!-- Confirm before deletion -->
                    <td><a href="../public/index.php?action=deleteBook&bookId={{ book.id }}"><i class="fas fa-trash alt"></i></a></td>
                </tr>
            {% else %}
                <p>Vous n'avez pas d'ouvrages enregistrés pour l'instant.</p>
            {% endfor %}
        </table>
    {% endblock %}

    {% block managingAccount %}
        <h3>Gestion de compte</h3>
        <div>
            <h4>Changer son mot de passe ou son pseudo</h4>
            <p>Veuillez entrer vos identifiants actuels.</p>
            <form action="../public/index.php?action=verifyInformations" method="post">
                <div>
                    <label for="verifyLogin">Pseudo</label><br />
                    <input type="text" id="verifyLogin" name="verifyLogin" value="{{ session.login }}" readonly/>
                </div>
                <div>
                    <label for="verifyPassword">Mot de passe</label><br />
                    <input type="password" id="verifyPassword" name="verifyPassword"/>
                </div>
                <div>
                    <input type="submit" value="Confirmer mes identifiants" class="submitButton"/>
                </div>
            </form>
        </div>
    {% endblock %}

    {% block deletionAccount %}
        <div>
            <h4>Suppression de compte</h4>
            <p>Veuillez entrer vos identifiants afin de confirmer la suppression de votre compte.</p>

            <form action="../public/index.php?action=deleteAccount&id={{ session.id }}" method="post">
                <div>
                    <label for="loginDelete">Pseudo</label>
                    <input type="text" id="loginDelete" name="loginDelete" value="{{ session.login }}" readonly/>
                </div>
                <div>
                    <label for="passwordDelete">Mot de passe</label>
                    <input type="password" id="passwordDelete" name="passwordDelete"/>
                </div>
                <div>
                    <input type="submit" value="Supprimer mon compte" class="submitButton"/>
                </div>
            </form>
        </div>
    {% endblock %}
{% endblock %}