{% extends "template.html.twig" %}

{% block title %}Liste de livres - {{ session.login }}{% endblock %}

{% block content %}
    <div class="row personalPage">
        {% block navbarLeftSide %}
            {% if session.status == 'admin' %}
                {% include 'adminPages/navbarAdmin.html.twig' %}
            {% else %}
                {% include 'memberPages/navbarMember.html.twig' %}
            {% endif %}
        {% endblock %}


        {% block displayContent %}
            <div class="col-9">
                {% block profileBanner %}
                    <div class="col-lg-12" class="generalProfileBanner">

                        {% include 'commonPages/profileBanner.html.twig' %}

                        <div class="col-lg-12 profileBannerText">
                            <h3>Liste de livres</h3>
                        </div>

                    </div>
                {% endblock %}

                <div class="col-lg-12">
                    {% block nbBooks %}
                        <div id="booksTotal">
                            Vous avez {{ totalBooks }} livre(s) enregistré(s).
                        </div>
                    {% endblock %}
                    {% block memberBookListArray %}
                        <table>
                            <tr class="book">
                                <th>Auteur</th>
                                <th>Titre</th>
                                <th>Résumé</th>
                                <th>Année de publication</th>
                                <th>ISBN</th>
                                <th>Nombre de pages</th>
                                <th>Modifier la fiche du livre</th>
                                <th>Supprimer de la liste</th>
                            </tr>
                            {% for book in memberBookList %}
                                <tr class="book">
                                    <td class="col-lg-1">{{ book.author }}</td>
                                    <td class="col-lg-2"><a href="../public/index.php?action=displayBook&bookId={{ book.id }}">{{ book.title }}</a></td>
                                    <td class="col-lg-3">{{ book.summary[:150] }}...</td>
                                    <td class="col-lg-1">{{ book.publishingYear }}</td>
                                    <td class="col-lg-2">{{ book.ISBN }}</td>
                                    <td class="col-lg-1">{{ book.nbPages }}</td>
                                    <td class="col-lg-1"><a href="../public/index.php?action=editBookDatas&bookId={{ book.id }}"><i class="fas fa-edit"></i></a></td>
                                    <td class="col-lg-1"><a href="../public/index.php?action=deleteBook&bookId={{ book.id }}" onclick="if(confirm('Êtes-vous sûr(e) de vouloir supprimer ce livre de votre liste ?')) return true; else return false"><i class="fas fa-trash alt"></i></a></td>
                                </tr>
                            {% else %}
                                <p>Vous n'avez pas d'ouvrages enregistrés pour l'instant.</p>
                            {% endfor %}
                        </table>
                    {% endblock %}
                </div>
            </div>
        {% endblock %}
    </div>
{% endblock %}